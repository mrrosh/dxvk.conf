# === DXVK Configuration for Turtle WoW ===
# Ryzen 5 4600H (6 cores / 12 threads) + GTX 1650 - Change according to your needs
# Async DXVK — optimized for Turtle WoW's custom server settings.

# Cap framerate to prevent FPS spikes and maintain stable performance.
d3d9.maxFrameRate = 90            # Cap at 90 FPS for consistent performance.

# V-Sync OFF for minimal input latency.
d3d9.presentInterval = 0
d3d9.tearFree = False             # Disable for better performance.

# Buffering (auto manage for best performance).
d3d9.numBackBuffers = 0           # Let DXVK handle it, good for Vanilla WoW.

# Memory management settings for GPU and textures.
d3d9.maxAvailableMemory = 4096    # Use 4GB for the GTX 1650, safe.
d3d9.textureMemory = 100          # 100MB default; reduce only for older GPUs.

# GPU resource management — force release after unlocking to avoid stutter.
d3d9.evictManagedOnUnlock = True
d3d9.allowDiscard = True

# Async DXVK settings for reduced stutter and faster shader compilation.
dxvk.enableAsync = True
dxvk.numCompilerThreads = 12      # Max out your 12 CPU threads for compiling.
dxvk.numAsyncThreads = 0          # Let DXVK manage async threads automatically.

# Memory chunking and pipeline management for smooth gameplay.
dxvk.maxChunkSize = 0             # Let DXVK handle chunk size automatically.
dxvk.enableGraphicsPipelineLibrary = Auto  # Reduces shader compilation stutter.
dxvk.trackPipelineLifetime = True # Helps reduce memory usage.

# Accuracy vs Performance: Focus on performance without significant issues.
d3d9.strictConstantCopies = False # Better performance on the GTX 1650.
d3d9.lenientClear = True          # Reduces overhead for cleaner performance.
d3d9.longMad = False              # Disable for more stable FPS.
d3d9.floatEmulation = False       # Fast, correct, and optimal for WoW.

# Disable front buffer to modernize rendering and reduce lag.
d3d9.noExplicitFrontBuffer = True # Minimal overhead during rendering.

# Don't let WoW mess with DPI awareness (let VanillaFixes manage this).
d3d9.dpiAware = False

# Uncomment if you want an FPS overlay to monitor performance.
# dxvk.hud = fps                   # Uncomment to display FPS in top-left corner.

# Disable some unnecessary functions for better performance.
d3d9.supportD32 = False           # Disable for better FPS.
d3d9.useD32forD24 = False         # Disable for better FPS.

# If you see texture pop-in or lag in low VRAM situations, try tweaking below.
d3d9.textureMemory = 50           # 50MB if you want to cut down on texture pop-ins.
